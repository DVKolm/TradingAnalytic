<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity"
      prefHeight="900.0" prefWidth="1400.0"
      xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.example.ta.controller.MainController">

    <!-- Верхняя панель навигации -->
    <HBox alignment="CENTER_LEFT" spacing="16.0"
          style="-fx-background-color: linear-gradient(to bottom, #ffffff, #f8f9fa); -fx-border-color: #dee2e6; -fx-border-width: 0 0 1 0; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 4, 0, 0, 1);">
        <children>
            <!-- Логотип и название -->
            <HBox alignment="CENTER_LEFT" spacing="8.0">
                <children>
                    <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="📊" />
                    <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="Trading Analytics" />
                </children>
            </HBox>

            <Separator orientation="VERTICAL" />

            <!-- Навигационные кнопки -->
            <HBox alignment="CENTER_LEFT" spacing="8.0">
                <children>
                    <Button fx:id="homeButton" onAction="#showHome" text="🏠 Главная" />
                    <Button fx:id="tradesListButton" onAction="#showTradesList" text="📈 Сделки" />
                    <Button fx:id="addTradeButton" onAction="#showAddTrade" text="➕ Добавить" />
                    <Button fx:id="statisticsButton" onAction="#showStatistics" text="📊 Статистика" />
                    <Button fx:id="positionCalculatorButton" onAction="#showPositionCalculator" text="Калькулятор" />
                    <Button fx:id="averagingCalculatorButton" onAction="#showAveragingCalculator" text="📉 Усреднение" />
                </children>
            </HBox>

            <!-- Разделитель для заполнения пространства -->
            <Region HBox.hgrow="ALWAYS" />

            <!-- Правая панель с утилитами -->
            <HBox alignment="CENTER_RIGHT" spacing="8.0">
                <children>
                    <!-- Кнопка переключения новостей -->
                    <Button fx:id="toggleNewsButton" />

                    <Separator orientation="VERTICAL" />

                    <Button fx:id="refreshButton" onAction="#refreshCurrentView" text="🔄" />

                    <!-- Настройки -->
                    <MenuButton style="-fx-background-color: transparent; -fx-text-fill: #6c757d;" text="⚙️">
                        <items>
                            <MenuItem onAction="#showTelegramSettings" text="Настройки Telegram" />
                            <MenuItem onAction="#showTwitterSettings" text="🐦 Настройки X" />
                        </items>
                    </MenuButton>
                </children>
            </HBox>
        </children>
        <padding>
            <Insets bottom="12.0" left="16.0" right="16.0" top="12.0" />
        </padding>
    </HBox>

    <!-- Основная область контента -->
    <StackPane fx:id="contentArea" VBox.vgrow="ALWAYS" />

    <!-- Нижняя строка состояния -->
    <HBox alignment="CENTER_LEFT" spacing="16.0"
          style="-fx-background-color: #f8f9fa; -fx-border-color: #dee2e6; -fx-border-width: 1 0 0 0;">
        <children>
            <Label fx:id="statusLabel" style="-fx-text-fill: #6c757d; -fx-font-size: 12px;" text="Готов" />

            <Region HBox.hgrow="ALWAYS" />

            <Label fx:id="telegramStatusLabel" style="-fx-font-size: 12px;" />

            <Separator orientation="VERTICAL" />

            <Label fx:id="currentTimeLabel" style="-fx-text-fill: #6c757d; -fx-font-size: 12px;" />

            <Label fx:id="versionLabel" style="-fx-text-fill: #adb5bd; -fx-font-size: 11px;" text="v1.0.4" />
        </children>
        <padding>
            <Insets bottom="6.0" left="16.0" right="16.0" top="6.0" />
        </padding>
    </HBox>

    <!-- Скрытый контейнер для новостной панели -->
    <VBox fx:id="newsContainer" managed="false" visible="false" />

</VBox>