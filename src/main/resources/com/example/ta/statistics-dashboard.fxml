<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>

<ScrollPane xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.ta.controller.trading.StatisticsController"
            fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED"
            style="-fx-background-color: #f8f9fa; -fx-border-color: transparent;">
   <content>
      <VBox spacing="24.0" style="-fx-background-color: #f8f9fa;">
         <children>
            <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
            <VBox spacing="16.0"
                  style="-fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 8, 0, 0, 2);">
               <children>
                  <VBox spacing="4.0">
                     <children>
                        <Label style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"
                               text="ðŸ“Š Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð»Ð¸" />
                        <Label style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d;"
                               text="ÐÐ½Ð°Ð»Ð¸Ð· Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð² Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹Ñ… ÑÐ´ÐµÐ»Ð¾Ðº Ð·Ð° Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ñ‹Ð¹ Ð¿ÐµÑ€Ð¸Ð¾Ð´" />
                     </children>
                  </VBox>

                  <Separator style="-fx-background-color: #ecf0f1;" />

                  <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¿ÐµÑ€Ð¸Ð¾Ð´Ð¾Ð¼ -->
                  <HBox alignment="CENTER_LEFT" spacing="16.0">
                     <children>
                        <VBox spacing="4.0">
                           <children>
                              <Label style="-fx-font-weight: 600; -fx-text-fill: #34495e; -fx-font-size: 13px;"
                                     text="ÐŸÐµÑ€Ð¸Ð¾Ð´:" />
                              <ComboBox fx:id="periodTypeComboBox"
                                        promptText="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿ÐµÑ€Ð¸Ð¾Ð´"
                                        style="-fx-background-color: #f8f9fa; -fx-border-color: #dee2e6; -fx-border-radius: 6; -fx-background-radius: 6; -fx-font-size: 13px;"
                                        prefWidth="160.0" />
                           </children>
                        </VBox>

                        <VBox spacing="4.0">
                           <children>
                              <Label style="-fx-font-weight: 600; -fx-text-fill: #34495e; -fx-font-size: 13px;"
                                     text="ÐžÑ‚:" />
                              <DatePicker fx:id="startDatePicker"
                                          style="-fx-background-color: #f8f9fa; -fx-border-color: #dee2e6; -fx-border-radius: 6; -fx-background-radius: 6; -fx-font-size: 13px;" />
                           </children>
                        </VBox>

                        <VBox spacing="4.0">
                           <children>
                              <Label style="-fx-font-weight: 600; -fx-text-fill: #34495e; -fx-font-size: 13px;"
                                     text="Ð”Ð¾:" />
                              <DatePicker fx:id="endDatePicker"
                                          style="-fx-background-color: #f8f9fa; -fx-border-color: #dee2e6; -fx-border-radius: 6; -fx-background-radius: 6; -fx-font-size: 13px;" />
                           </children>
                        </VBox>

                        <Region HBox.hgrow="ALWAYS" />

                        <Button onAction="#calculateStatistics"
                                style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: 600; -fx-background-radius: 8; -fx-padding: 10 20 10 20; -fx-cursor: hand;"
                                text="ðŸ“ˆ Ð Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ" />

                        <Button onAction="#exportToExcel"
                                style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: 600; -fx-background-radius: 8; -fx-padding: 10 20 10 20; -fx-cursor: hand;"
                                text="ðŸ“Š Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Excel" />
                     </children>
                  </HBox>
               </children>
               <padding>
                  <Insets bottom="20.0" left="24.0" right="24.0" top="20.0" />
               </padding>
            </VBox>

            <!-- ÐžÑÑ‚Ð°Ð»ÑŒÐ½Ð¾Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ Ð¾ÑÑ‚Ð°ÐµÑ‚ÑÑ Ð±ÐµÐ· Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹... -->
            <!-- Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸ -->
            <VBox spacing="16.0"
                  style="-fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 8, 0, 0, 2);">
               <children>
                  <Label style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #34495e;"
                         text="ðŸ“‹ ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»Ð¸ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹Ñ… ÑÐ´ÐµÐ»Ð¾Ðº" />

                  <GridPane hgap="20.0" vgap="15.0">
                     <columnConstraints>
                        <ColumnConstraints hgrow="ALWAYS" minWidth="200.0" prefWidth="250.0" percentWidth="33.33" />
                        <ColumnConstraints hgrow="ALWAYS" minWidth="200.0" prefWidth="250.0" percentWidth="33.33" />
                        <ColumnConstraints hgrow="ALWAYS" minWidth="200.0" prefWidth="250.0" percentWidth="33.33" />
                     </columnConstraints>
                     <rowConstraints>
                        <RowConstraints minHeight="100.0" prefHeight="110.0" vgrow="SOMETIMES" />
                        <RowConstraints minHeight="100.0" prefHeight="110.0" vgrow="SOMETIMES" />
                        <RowConstraints minHeight="100.0" prefHeight="110.0" vgrow="SOMETIMES" />
                     </rowConstraints>
                     <children>
                        <!-- Ð’ÑÐµÐ³Ð¾ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹Ñ… ÑÐ´ÐµÐ»Ð¾Ðº -->
                        <VBox alignment="CENTER" spacing="8.0"
                              style="-fx-background-color: #f8f9fa; -fx-background-radius: 8; -fx-padding: 20;"
                              GridPane.columnIndex="0" GridPane.rowIndex="0">
                           <children>
                              <Label style="-fx-font-size: 24px;" text="ðŸ’¼" />
                              <Label fx:id="totalTradesStatLabel"
                                     style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #3498db;"
                                     text="0" />
                              <Label style="-fx-font-size: 13px; -fx-text-fill: #495057; -fx-text-alignment: center; -fx-font-weight: 600;"
                                     text="Ð—ÐÐšÐ Ð«Ð¢Ð«Ð¥ Ð¡Ð”Ð•Ð›ÐžÐš" />
                           </children>
                        </VBox>

                        <!-- ÐžÐ±Ñ‰Ð°Ñ Ð¿Ñ€Ð¸Ð±Ñ‹Ð»ÑŒ -->
                        <VBox alignment="CENTER" spacing="8.0"
                              style="-fx-background-color: #f8f9fa; -fx-background-radius: 8; -fx-padding: 20;"
                              GridPane.columnIndex="1" GridPane.rowIndex="0">
                           <children>
                              <Label style="-fx-font-size: 24px;" text="ðŸ’°" />
                              <Label fx:id="totalProfitStatLabel"
                                     style="-fx-font-size: 24px; -fx-font-weight: bold;"
                                     text="0.00" />
                              <Label style="-fx-font-size: 13px; -fx-text-fill: #495057; -fx-text-alignment: center; -fx-font-weight: 600;"
                                     text="ÐžÐ‘Ð©ÐÐ¯ ÐŸÐ Ð˜Ð‘Ð«Ð›Ð¬" />
                           </children>
                        </VBox>

                        <!-- ÐžÐ±Ñ‰Ð¸Ð¹ Ð¾Ð±ÑŠÐµÐ¼ -->
                        <VBox alignment="CENTER" spacing="8.0"
                              style="-fx-background-color: #f8f9fa; -fx-background-radius: 8; -fx-padding: 20;"
                              GridPane.columnIndex="2" GridPane.rowIndex="0">
                           <children>
                              <Label style="-fx-font-size: 24px;" text="ðŸ“Š" />
                              <Label fx:id="totalVolumeStatLabel"
                                     style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #9b59b6;"
                                     text="0.00" />
                              <Label style="-fx-font-size: 13px; -fx-text-fill: #495057; -fx-text-alignment: center; -fx-font-weight: 600;"
                                     text="ÐžÐ‘Ð©Ð˜Ð™ ÐžÐ‘ÐªÐ•Ðœ" />
                           </children>
                        </VBox>

                        <!-- ÐŸÑ€Ð¸Ð±Ñ‹Ð»ÑŒÐ½Ñ‹Ðµ ÑÐ´ÐµÐ»ÐºÐ¸ -->
                        <VBox alignment="CENTER" spacing="8.0"
                              style="-fx-background-color: #f8f9fa; -fx-background-radius: 8; -fx-padding: 20;"
                              GridPane.columnIndex="0" GridPane.rowIndex="1">
                           <children>
                              <Label style="-fx-font-size: 24px;" text="âœ…" />
                              <Label fx:id="profitableTradesStatLabel"
                                     style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #27ae60;"
                                     text="0" />
                              <Label style="-fx-font-size: 13px; -fx-text-fill: #495057; -fx-text-alignment: center; -fx-font-weight: 600;"
                                     text="ÐŸÐ Ð˜Ð‘Ð«Ð›Ð¬ÐÐ«Ð¥" />
                           </children>
                        </VBox>

                        <!-- Ð£Ð±Ñ‹Ñ‚Ð¾Ñ‡Ð½Ñ‹Ðµ ÑÐ´ÐµÐ»ÐºÐ¸ -->
                        <VBox alignment="CENTER" spacing="8.0"
                              style="-fx-background-color: #f8f9fa; -fx-background-radius: 8; -fx-padding: 20;"
                              GridPane.columnIndex="1" GridPane.rowIndex="1">
                           <children>
                              <Label style="-fx-font-size: 24px;" text="âŒ" />
                              <Label fx:id="losingTradesStatLabel"
                                     style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #e74c3c;"
                                     text="0" />
                              <Label style="-fx-font-size: 13px; -fx-text-fill: #495057; -fx-text-alignment: center; -fx-font-weight: 600;"
                                     text="Ð£Ð‘Ð«Ð¢ÐžÐ§ÐÐ«Ð¥" />
                           </children>
                        </VBox>

                        <!-- Ð’Ð¸Ð½Ñ€ÐµÐ¹Ñ‚ -->
                        <VBox alignment="CENTER" spacing="8.0"
                              style="-fx-background-color: #f8f9fa; -fx-background-radius: 8; -fx-padding: 20;"
                              GridPane.columnIndex="2" GridPane.rowIndex="1">
                           <children>
                              <Label style="-fx-font-size: 24px;" text="ðŸŽ¯" />
                              <Label fx:id="winRateStatLabel"
                                     style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #f39c12;"
                                     text="0%" />
                              <Label style="-fx-font-size: 13px; -fx-text-fill: #495057; -fx-text-alignment: center; -fx-font-weight: 600;"
                                     text="ÐŸÐ ÐžÐ¦Ð•ÐÐ¢ Ð£Ð¡ÐŸÐ•Ð¥Ð" />
                           </children>
                        </VBox>

                        <!-- Ð¡Ñ€ÐµÐ´Ð½ÑÑ Ð¿Ñ€Ð¸Ð±Ñ‹Ð»ÑŒ -->
                        <VBox alignment="CENTER" spacing="8.0"
                              style="-fx-background-color: #f8f9fa; -fx-background-radius: 8; -fx-padding: 20;"
                              GridPane.columnIndex="0" GridPane.rowIndex="2">
                           <children>
                              <Label style="-fx-font-size: 24px;" text="ðŸ“ˆ" />
                              <Label fx:id="avgProfitStatLabel"
                                     style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #17a2b8;"
                                     text="0.00" />
                              <Label style="-fx-font-size: 13px; -fx-text-fill: #495057; -fx-text-alignment: center; -fx-font-weight: 600;"
                                     text="Ð¡Ð Ð•Ð”ÐÐ¯Ð¯ ÐŸÐ Ð˜Ð‘Ð«Ð›Ð¬" />
                           </children>
                        </VBox>

                        <!-- ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¸Ð±Ñ‹Ð»ÑŒ -->
                        <VBox alignment="CENTER" spacing="8.0"
                              style="-fx-background-color: #f8f9fa; -fx-background-radius: 8; -fx-padding: 20;"
                              GridPane.columnIndex="1" GridPane.rowIndex="2">
                           <children>
                              <Label style="-fx-font-size: 24px;" text="ðŸš€" />
                              <Label fx:id="maxProfitStatLabel"
                                     style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #28a745;"
                                     text="0.00" />
                              <Label style="-fx-font-size: 13px; -fx-text-fill: #495057; -fx-text-alignment: center; -fx-font-weight: 600;"
                                     text="ÐœÐÐšÐ¡. ÐŸÐ Ð˜Ð‘Ð«Ð›Ð¬" />
                           </children>
                        </VBox>

                        <!-- ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÑƒÐ±Ñ‹Ñ‚Ð¾Ðº -->
                        <VBox alignment="CENTER" spacing="8.0"
                              style="-fx-background-color: #f8f9fa; -fx-background-radius: 8; -fx-padding: 20;"
                              GridPane.columnIndex="2" GridPane.rowIndex="2">
                           <children>
                              <Label style="-fx-font-size: 24px;" text="ðŸ“‰" />
                              <Label fx:id="maxLossStatLabel"
                                     style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #dc3545;"
                                     text="0.00" />
                              <Label style="-fx-font-size: 13px; -fx-text-fill: #495057; -fx-text-alignment: center; -fx-font-weight: 600;"
                                     text="ÐœÐÐšÐ¡. Ð£Ð‘Ð«Ð¢ÐžÐš" />
                           </children>
                        </VBox>
                     </children>
                  </GridPane>
               </children>
               <padding>
                  <Insets bottom="20.0" left="24.0" right="24.0" top="20.0" />
               </padding>
            </VBox>

            <!-- Ð“Ñ€Ð°Ñ„Ð¸Ðº ÐºÑ€Ð¸Ð²Ð¾Ð¹ ÑÐºÐ²Ð¸Ñ‚Ð¸ -->
            <VBox spacing="16.0"
                  style="-fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 8, 0, 0, 2);">
               <children>
                  <Label style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #34495e;"
                         text="ðŸ“Š ÐšÑ€Ð¸Ð²Ð°Ñ ÑÐºÐ²Ð¸Ñ‚Ð¸" />

                  <LineChart fx:id="equityCurveChart" prefHeight="400.0"
                             style="-fx-background-color: white; -fx-background-radius: 8;">
                     <xAxis>
                        <CategoryAxis side="BOTTOM" />
                     </xAxis>
                     <yAxis>
                        <NumberAxis side="LEFT" />
                     </yAxis>
                  </LineChart>
               </children>
               <padding>
                  <Insets bottom="20.0" left="24.0" right="24.0" top="20.0" />
               </padding>
            </VBox>
         </children>
         <padding>
            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
         </padding>
      </VBox>
   </content>
</ScrollPane>